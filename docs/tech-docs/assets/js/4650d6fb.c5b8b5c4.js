"use strict";(self.webpackChunktech_docs=self.webpackChunktech_docs||[]).push([[118],{876:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var o=n(2784);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8601:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var o=n(7896),a=n(1461),r=(n(2784),n(876)),i=["components"],s={},l="Node Modules (NPM Packages)",c={unversionedId:"distribution/node-modules-npm",id:"distribution/node-modules-npm",title:"Node Modules (NPM Packages)",description:"Node.js & NPM popularized the now ubiquitous presence of node_modules/ folders in nearly every javascript app and library. It\u2019s the place you\u2019ll find all the javascript your app or library depends on, and it\u2019s the main reason for how rapidly today\u2019s javascript ecosystem has grown and evolved.",source:"@site/docs/distribution/node-modules-npm.md",sourceDirName:"distribution",slug:"/distribution/node-modules-npm",permalink:"/tech-docs/docs/distribution/node-modules-npm",editUrl:"https://github.com/sterlingwes/dingus.business/tree/main/sites/tech-docs/docs/distribution/node-modules-npm.md",tags:[],version:"current",frontMatter:{},sidebar:"frontend",previous:{title:"Modules",permalink:"/tech-docs/docs/distribution/modules"},next:{title:"Bundlers",permalink:"/tech-docs/docs/distribution/bundlers"}},p=[{value:"The Manifest (package.json)",id:"the-manifest-packagejson",children:[],level:2},{value:"The Lock File (yarn.lock / package-lock.json)",id:"the-lock-file-yarnlock--package-lockjson",children:[],level:2},{value:"A Typical Package Structure",id:"a-typical-package-structure",children:[],level:2}],d={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"node-modules-npm-packages"},"Node Modules (NPM Packages)"),(0,r.kt)("p",null,"Node.js & NPM popularized the now ubiquitous presence of ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules/")," folders in nearly every javascript app and library. It\u2019s the place you\u2019ll find all the javascript your app or library depends on, and it\u2019s the main reason for how rapidly today\u2019s javascript ecosystem has grown and evolved."),(0,r.kt)("p",null,"Most of these dependencies come from the ",(0,r.kt)("a",{parentName:"p",href:"http://npmjs.com"},"central NPM repository"),". There are two prominent CLI tools for interacting with node_modules and managing dependencies: NPM & Yarn, which both work in similar ways. Yarn is more prominent in the Facebook-backed ecosystems (like React & React Native)."),(0,r.kt)("h2",{id:"the-manifest-packagejson"},"The Manifest (package.json)"),(0,r.kt)("p",null,"Every javascript workspace that uses NPM packages, and the NPM packages themselves, have a manifest file called ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," in the root of the folder, which has the following key fields:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"those that are important for modules you\u2019re publishing for use by others (ie: on NPM):",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name"),", which will be the name of the package on NPM"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"version"),", which follows semver: ",(0,r.kt)("inlineCode",{parentName:"li"},"major.minor.patch")," version numbers"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"main"),", the path to the \u201centry point\u201d JS module for your package"))),(0,r.kt)("li",{parentName:"ul"},"those you\u2019ll use regardless:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dependencies"),", which is an object of dependencies on other modules that your app needs at runtime"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"devDependencies"),", which is an object of dependencies used to build, test, or otherwise work with your code locally but that doesn\u2019t have code that runs when your code runs")))),(0,r.kt)("p",null,"Each dependency in one of the objects above will have a version range that dictates which versions of your dependencies you want:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"^1.0.0")," says you\u2019ll accept any version with the same major number (ie: 1.2.3 is OK, 2.0.1 is not) - ",(0,r.kt)("inlineCode",{parentName:"li"},"1.x")," is a shorthand for this"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"^0.60.0")," says you\u2019ll accept any version with the same minor number (ie: 0.60.1 is OK, 0.59.0 and 1.0.0 are not)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"1.0.0")," says you want ",(0,r.kt)("em",{parentName:"li"},"exactly")," this version and none other")),(0,r.kt)("p",null,"NPM has a great tool for seeing this visually: ",(0,r.kt)("a",{parentName:"p",href:"https://semver.npmjs.com/"},"https://semver.npmjs.com"),"."),(0,r.kt)("h2",{id:"the-lock-file-yarnlock--package-lockjson"},"The Lock File (yarn.lock / package-lock.json)"),(0,r.kt)("p",null,"The version range indications in the package.json informs how the lock file is generated, which is an important file in your javascript workspace. It\u2019s the ultimate source of truth for what you ship and the dependency versions that are in use at runtime. It should be committed to source control and deleted or regenerated with careful consideration for the impact of version shifts in the code you ship."),(0,r.kt)("h2",{id:"a-typical-package-structure"},"A Typical Package Structure"),(0,r.kt)("p",null,"If you were to ",(0,r.kt)("inlineCode",{parentName:"p"},"cd")," into any one package under node_modules, you might see something like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"node_modules/\n    @some-org/\n        some-package/\n            dist/\n                index.js\n                index.d.ts\n            src/\n                index.js\n            package.json\n    no-namespace-package/\n        lib/\n            index.js\n")),(0,r.kt)("p",null,"For the ",(0,r.kt)("inlineCode",{parentName:"p"},"@some-org/some-package")," NPM package above, you\u2019ll see two folders: dist and src. It\u2019s common for a package that has a dist/ folder to omit the src/ one from what they publish, but not always. In this package\u2019s manifest (package.json), there\u2019d be a ",(0,r.kt)("inlineCode",{parentName:"p"},"main")," entry that likely points to ",(0,r.kt)("inlineCode",{parentName:"p"},"dist/index.js")," . Which means, that\u2019s the code that gets run by your code when you import from this package (",(0,r.kt)("inlineCode",{parentName:"p"},"import {someExport} from \u2018@some-org/some-package\u2019"),"). The ",(0,r.kt)("inlineCode",{parentName:"p"},"index.d.ts")," file indicates that this package supports typescript types, and that file holds the types for the library\u2019s exports. The src/ folder in this case is in the package you install, but what\u2019s inside has no bearing on the code you ship."),(0,r.kt)("p",null,"For the ",(0,r.kt)("inlineCode",{parentName:"p"},"no-namespace-package")," you\u2019ll see only one folder. This might indicate that the code in ",(0,r.kt)("inlineCode",{parentName:"p"},"lib/index.js")," has not been transformed to the lowest common denominator (ie: ES5 / ES2015 javascript), but there\u2019s no guarantee of that since the ",(0,r.kt)("inlineCode",{parentName:"p"},"dist/")," convention for transpiled code is loosely followed. Depending on which JS engines you plan to have your code run in, you may have to tweak your own build settings to ensure this package conforms to the version of javascript you intend to ship (based on the language features in your code that you need to support). That\u2019s typically the realm of bundlers or test frameworks to manage, though they\u2019d use a transform tool like Babel to do so."))}u.isMDXComponent=!0}}]);